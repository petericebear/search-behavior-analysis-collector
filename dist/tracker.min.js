(()=>{var t={140:t=>{class e{constructor(t={}){this.config={endpoint:t.endpoint||"/api/track",selector:t.selector||".trackable-item",dataAttribute:t.dataAttribute||"data-item-id",sessionTimeout:t.sessionTimeout||18e5,batchSize:t.batchSize||10,sendInterval:t.sendInterval||5e3},this.events=[],this.sessionId=this.getOrCreateSessionId(),this.setupEventListeners(),this.setupBatchSending()}getOrCreateSessionId(){const t=sessionStorage.getItem("tracker_session_id");if(t)return t;const e=this.generateUUID();return sessionStorage.setItem("tracker_session_id",e),e}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}setupEventListeners(){document.addEventListener("click",(t=>{const e=t.target.closest(this.config.selector);if(e){const s=e.getAttribute(this.config.dataAttribute);s&&this.trackClick({itemId:s,x:t.clientX,y:t.clientY,timestamp:(new Date).toISOString()})}}))}setupBatchSending(){setInterval((()=>{this.events.length>0&&this.sendEvents()}),this.config.sendInterval)}trackEvent(t,e={}){this.events.push({type:"custom_event",name:t,data:e,sessionId:this.sessionId,timestamp:(new Date).toISOString()}),this.events.length>=this.config.batchSize&&this.sendEvents()}trackClick(t){this.events.push({type:"click",...t,sessionId:this.sessionId}),this.events.length>=this.config.batchSize&&this.sendEvents()}async sendEvents(){if(0===this.events.length)return;const t=[...this.events];this.events=[];try{if(!(await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t,sessionId:this.sessionId})})).ok)throw this.events=[...t,...this.events],new Error("Failed to send events")}catch(e){console.error("Error sending events:",e),this.events=[...t,...this.events]}}resetSession(){sessionStorage.removeItem("tracker_session_id"),this.sessionId=this.getOrCreateSessionId()}trackConversion(t){this.trackEvent("conversion",t),this.resetSession()}}t.exports?t.exports=e:window.CustomTracker=e}},e={};(function s(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,s),r.exports})(140)})();